(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("lodash"),require("vue"),require("papaparse"),require("axios")):"function"===typeof define&&define.amd?define([,,,],t):"object"===typeof exports?exports["VueCsvImport"]=t(require("lodash"),require("vue"),require("papaparse"),require("axios")):e["VueCsvImport"]=t(e["_"],e["Vue"],e["papaparse"],e["axios"])})("undefined"!==typeof self?self:this,function(e,t,n,r){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"60bb":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},9331:function(e,t){e.exports=n},cebe:function(e,t){e.exports=r},f6fd:function(e,t){(function(e){var t="currentScript",n=e.getElementsByTagName("script");t in e||Object.defineProperty(e,t,{get:function(){try{throw new Error}catch(r){var e,t=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(r.stack)||[!1])[1];for(e in n)if(n[e].src==t||"interactive"==n[e].readyState)return n[e];return null}}})})(document)},fb15:function(e,t,n){"use strict";var r;(n.r(t),"undefined"!==typeof window)&&(n("f6fd"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(n.p=r[1]));var a=n("8bbf"),o=n.n(a),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vue-csv-uploader"},[n("div",{staticClass:"form"},[n("div",{staticClass:"vue-csv-uploader-part-one"},[null===e.headers?n("div",{staticClass:"form-check form-group csv-import-checkbox"},[e._t("hasHeaders",[n("input",{class:e.checkboxClass,attrs:{type:"checkbox",id:"hasHeaders"},domProps:{value:e.hasHeaders},on:{change:e.toggleHasHeaders}}),n("label",{staticClass:"form-check-label",attrs:{for:"hasHeaders"}},[e._v("\n                        File Has Headers\n                    ")])],{headers:e.hasHeaders,toggle:e.toggleHasHeaders})],2):e._e(),n("div",{staticClass:"form-group csv-import-file"},[n("input",{ref:"csv",class:e.inputClass,attrs:{type:"file",name:"csv"}})]),n("div",{staticClass:"form-group"},[e._t("next",[n("input",{class:e.buttonClass,attrs:{type:"submit"},domProps:{value:e.loadBtnText},on:{click:function(t){return t.preventDefault(),e.load(t)}}})],{load:e.load})],2)]),n("div",{staticClass:"vue-csv-uploader-part-two"},[e.sample?n("div",{staticClass:"vue-csv-mapping"},[n("table",{class:e.tableClass},[e._t("thead",[e._m(0)]),n("tbody",e._l(e.fieldsToMap,function(t,r){return n("tr",{key:r},[n("td",[e._v(e._s(t.label))]),n("td",[n("select",{directives:[{name:"model",rawName:"v-model",value:e.map[t.key],expression:"map[field.key]"}],staticClass:"form-control",on:{change:function(n){var r=Array.prototype.filter.call(n.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.map,t.key,n.target.multiple?r:r[0])}}},e._l(e.firstRow,function(t,r){return n("option",{key:r,domProps:{value:r}},[e._v(e._s(t))])}),0)])])}),0)],2),e.url?n("div",{staticClass:"form-group"},[e._t("submit",[n("input",{class:e.buttonClass,attrs:{type:"submit"},domProps:{value:e.submitBtnText},on:{click:function(t){return t.preventDefault(),e.submit(t)}}})],{submit:e.submit})],2):e._e()]):e._e()])])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("Field")]),n("th",[e._v("CSV Column")])])])}],u=n("60bb"),l=n.n(u),c=n("cebe"),f=n.n(c),p=n("9331"),d=n.n(p),m={props:{value:Array,url:{type:String},mapFields:{required:!0},callback:{type:Function,default:function(){}},catch:{type:Function,default:function(){}},finally:{type:Function,default:function(){}},parseConfig:{type:Object,default:function(){return{}}},headers:{default:null},loadBtnText:{type:String,default:"Next"},submitBtnText:{type:String,default:"Submit"},tableClass:{type:String,default:"table"},checkboxClass:{type:String,default:"form-check-input"},buttonClass:{type:String,default:"btn btn-primary"},inputClass:{type:String,default:"form-control-file"}},data:function(){return{form:{csv:null},fieldsToMap:[],map:{},hasHeaders:!0,csv:null,sample:null}},created:function(){this.hasHeaders=this.headers,l.a.isArray(this.mapFields)?this.fieldsToMap=l.a.map(this.mapFields,function(e){return{key:e,label:e}}):this.fieldsToMap=l.a.map(this.mapFields,function(e,t){return{key:t,label:e}})},methods:{submit:function(){var e=this;this.form.csv=this.buildMappedCsv(),this.$emit("input",this.form.csv),this.url?f.a.post(this.url,this.form).then(function(t){e.callback(t)}).catch(function(t){e.catch(t)}).finally(function(t){e.finally(t)}):e.callback(this.form.csv)},buildMappedCsv:function(){var e=this,t=this.hasHeaders?l.a.drop(this.csv):this.csv;return l.a.map(t,function(t){var n={};return l.a.forEach(e.map,function(e,r){l.a.set(n,r,l.a.get(t,e))}),n})},load:function(){var e=this;this.readFile(function(t){e.sample=l.a.get(d.a.parse(t,{preview:2,skipEmptyLines:!0}),"data"),e.csv=l.a.get(d.a.parse(t,{skipEmptyLines:!0}),"data")})},readFile:function(e){var t=this.$refs.csv.files[0];if(t){var n=new FileReader;n.readAsText(t,"UTF-8"),n.onload=function(t){e(t.target.result)},n.onerror=function(){}}},toggleHasHeaders:function(){this.hasHeaders=!this.hasHeaders}},watch:{map:{handler:function(e){if(!this.url){var t=this.mapFields.every(function(t){return e.hasOwnProperty(t)});t&&this.submit()}},deep:!0}},computed:{firstRow:function(){return l.a.get(this,"sample.0")}}},v=m;function h(e,t,n,r,a,o,s,i){var u,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=u):a&&(u=i?function(){a.call(this,this.$root.$options.shadowRoot)}:a),u)if(l.functional){l._injectStyles=u;var c=l.render;l.render=function(e,t){return u.call(t),c(e,t)}}else{var f=l.beforeCreate;l.beforeCreate=f?[].concat(f,u):[u]}return{exports:e,options:l}}var b=h(v,s,i,!1,null,null,null),y=b.exports;function _(e){return _="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}var g={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.component(t.componentName||"VueCsvImport",y)}};void 0!==("undefined"===typeof window?"undefined":_(window))&&window.Vue&&window.Vue===o.a&&install(window.Vue);var C=y;n.d(t,"VueCsvImport",function(){return y}),n.d(t,"VueCsvImportPlugin",function(){return g});t["default"]=C}})});
//# sourceMappingURL=VueCsvImport.umd.min.js.map